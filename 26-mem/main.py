# Trial 1
# import gc
#
# mf=gc.mem_free()
# ma=gc.mem_alloc()
# mt = mf + ma
# print('mem_free={:,}/{:.1f}%,alloc={:,},total={:,}'.format(mf,mf/mt*100,ma,mt))
#
# # outcome
# mem_free=2,532,272/98.9%,alloc=29,088,total=2,561,360


import gc
import micropython
gc.collect()
micropython.mem_info()
print('-----------------------------')
print('Initial free:     {:,} allocated: {:,}'.format(gc.mem_free(), gc.mem_alloc()))
def func():
    a = bytearray(10000)
gc.collect()
print('Func definition:  {:,} allocated: {:,}'.format(gc.mem_free(), gc.mem_alloc()))
func()
print('Func run free:    {:,} allocated: {:,}'.format(gc.mem_free(), gc.mem_alloc()))
gc.collect()
print('Garbage collect : {:,} allocated: {:,}'.format(gc.mem_free(), gc.mem_alloc()))
del func
print('del func        : {:,} allocated: {:,}'.format(gc.mem_free(), gc.mem_alloc()))

print('-----------------------------')
micropython.mem_info(1)

# stack: 720 out of 11264
# GC: total: 2561344, used: 15072, free: 2546272
#  No. of 1-blocks: 317, 2-blocks: 57, max blk sz: 37, max free sz: 158193
# -----------------------------
# Initial free:    2546272 allocated: 15072
# Func definition: 2546208 allocated: 15136
# Func run free:   2536064 allocated: 25280
# Garbage collect  2536208 allocated: 25136
# -----------------------------
# stack: 720 out of 11264
# GC: total: 2561344, used: 25264, free: 2536080
#  No. of 1-blocks: 323, 2-blocks: 57, max blk sz: 625, max free sz: 157568
# GC memory layout; from 3f94eba0:
# 00000: MDhhhhhhhhh===hhSSS...Bh==.h=======h=====...h==.......MD........
# 00400: .D.B...MD.....B....Bh===........MD..DBBh===.Dh===h==h====B=h====
# 00800: =======BBBBBBBBBB.B=.B=B.B=h===......h==========================
# 00c00: ==========h===========...MD....D.BB...........DBB=h==h===h=====B
# 01000: B.B=B.B=.B=B.B=BBBBBBBBBBBBBBBBBBBBB.B=BB.B=..B==..B=.B=B.B=.B=.
# 01400: ..B==..B=.B=.B=B.B=BBh===.h.....Sh=============================.
# 01800: ...h.....................................DDS.ShhSShDLh=h=hDhh==S
# 01c00: ...h==Sh=S.....h=h=====h===....h===...............MD............
# 02000: MD...........MD............MD......................DB.B=....BBBB
# 02400: BBBBBBBBBBBh===h====......h===========.D..........BD....h=h===B.
# 02800: B=B.BBBBB=BBB.B=B.B=BBBBBBBBBBh===h====.......h==============.D.
# 02c00: .......h==BD...B==.BB.B=B=B...BB=...B=h=====h===.......MD.......
# 03000: ......MD.....................................DBBBBBBB.B=BBBBBBBB
# 03400: BBBh===h=====.h===========..............MD..DD.DBBBBBh=.h===h===
# 03800: .......MD..............................h========BBBhBhBBBBh===h=
# 03c00: ==..B=BBBD.BBh====h========BBB=.B=BBB.Bh===Dh=====BB..BB..B=Bh==
# 04000: =h===..........MD............h=DBBBBBBBh===.h====...............
# 04400: ....DBBBBBBBBBBB.B=BBBBh===========BBBBBBBBBBBBB.B=B.B=BBBBBBBBh
# 04800: ===.....................DBBB.B..h=======================h=======
# 04c00: =B=BB=BBB.B=BBh===...h========..................................
# 05000: ..............................S...............................B.
# 05400: SS.........hh......D....Sh==Sh==h...h..ShDh==h==Shh.h=h=DDh=====
# 05800: h========.....h=Sh=.....h===========............................
# 05c00: .....................................hhS..A........hhh==Lhhh====
# 06000: =hh=====hh..hh=Lhhhh=.h=====..hh.h=====h========hh==T.h=========
# 06400: ==................................................h===T.........
# 06800: ......hS.................................h====.....h==..........
# 06c00: ..........h=Sh==h=SS..................................h=h=......
# 07000: ..............h==============...................................
# 07400: .................................h=h============================
# 07800: ================================================================
# 07c00: ================================================================
# 08000: ================================================================
# 08400: ================================================================
# 08800: ================================================================
# 08c00: ================================================================
# 09000: ================================================================
# 09400: ================================================================
# 09800: ================================================================
# 09c00: ====================............................................
#        (2461 lines all free)
# 71400: ....................
